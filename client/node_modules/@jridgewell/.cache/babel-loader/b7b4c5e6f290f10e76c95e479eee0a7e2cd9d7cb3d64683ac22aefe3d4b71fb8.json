{"ast":null,"code":"import { withRouter } from 'react-router-dom';\nimport React from \"react\";\nimport history from './history';\nimport { useCookies } from 'react-cookie';\nconst getHeader = {\n  headers: {\n    Accept: \"application/json\"\n  }\n};\nconst postHeader = {\n  method: \"POST\",\n  headers: {\n    ...getHeader,\n    \"Content-Type\": \"application/json\"\n  }\n};\nlet host = \"\";\nif (process.env.NODE_ENV !== \"production\") host = \"http://localhost:3000\";\nexport const getCertificate = certificateId => fetch(`${host}/certificate/data/${certificateId}`, getHeader).then(res => res.json()).catch(err => {\n  console.log(err);\n});\nexport const verifyCertificate = certificateId => fetch(`${host}/certificate/verify/${certificateId}`, getHeader).then(res => {\n  if (res.status === 200) return true;else if (res.status === 401) return false;\n}).catch(err => {\n  console.log(err);\n});\nexport const generateCertificate = (candidateName, courseName, orgName, assignDate, duration, emailId) =>\n// console.log(\"Hello\");\nfetch(`${host}/certificate/generate`, {\n  ...postHeader,\n  body: JSON.stringify({\n    candidateName,\n    courseName,\n    orgName,\n    assignDate,\n    duration,\n    emailId\n  })\n}).then(res => res.json()).catch(err => {\n  console.log(err);\n});\nexport const SignUp = (username, pass, firstname, lastname, email, phone, gender) => {\n  fetch(`${host}/signup`, {\n    ...postHeader,\n    body: JSON.stringify({\n      username,\n      pass,\n      firstname,\n      lastname,\n      email,\n      phone,\n      gender\n    })\n  }).then(async res => {\n    if (res.status === 200) {\n      await res.json().then(body => {\n        console.log(body.result);\n        if (body.result == \"Success\") {\n          localStorage.setItem('user', email);\n          localStorage.setItem('pwd', pass);\n          localStorage.setItem(\"privilege\", body.privilege);\n          history.push(\"/dashboard\");\n        }\n      });\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n};\n_c = SignUp;\nexport const OrgReg = (orgname, orgregno, email, phone, pass) => {\n  fetch(`${host}/OrgReg`, {\n    ...postHeader,\n    body: JSON.stringify({\n      orgname,\n      orgregno,\n      email,\n      phone,\n      pass\n    })\n  }).then(async res => {\n    if (res.status === 200) {\n      await res.json().then(body => {\n        console.log(body.result);\n        if (body.result == \"Success\") {\n          localStorage.setItem('user', email);\n          localStorage.setItem('pwd', pass);\n          localStorage.setItem(\"privilege\", body.privilege);\n          history.push(\"/orgHome\");\n        }\n      });\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n};\n_c2 = OrgReg;\nexport const login = (UserName, Password) => {\n  fetch(`${host}/login`, {\n    ...postHeader,\n    body: JSON.stringify({\n      email: UserName,\n      pass: Password\n    })\n  }).then(async res => {\n    if (res.status === 200) {\n      await res.json().then(body => {\n        console.log(body.result);\n        if (body.result == \"Success\") {\n          localStorage.setItem('user', UserName);\n          localStorage.setItem('pwd', Password);\n          localStorage.setItem(\"privilege\", body.privilege);\n          if (body.privilege === \"normal\") history.push(\"/dashboard\");else {\n            history.push(\"/orgHome\");\n          }\n        }\n      });\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\n// login.propTypes = {\n//   history: React.PropTypes.shape({\n//     push: React.PropTypes.func.isRequired,\n//   }),\n// };\n\nexport const RequestCertifcates = (UserName, Password, OrgName, ReqTo, Message) => {\n  fetch(`${host}/signup`, {\n    ...postHeader,\n    body: JSON.stringify({\n      UserName,\n      Password,\n      OrgName,\n      ReqTo,\n      Message\n    })\n  }).then(res => {\n    console.log(res.json());\n    return {\n      User: UserName\n    };\n  }).catch(err => {\n    console.log(err);\n  });\n};\n_c3 = RequestCertifcates;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SignUp\");\n$RefreshReg$(_c2, \"OrgReg\");\n$RefreshReg$(_c3, \"RequestCertifcates\");","map":{"version":3,"names":["withRouter","React","history","useCookies","getHeader","headers","Accept","postHeader","method","host","process","env","NODE_ENV","getCertificate","certificateId","fetch","then","res","json","catch","err","console","log","verifyCertificate","status","generateCertificate","candidateName","courseName","orgName","assignDate","duration","emailId","body","JSON","stringify","SignUp","username","pass","firstname","lastname","email","phone","gender","result","localStorage","setItem","privilege","push","OrgReg","orgname","orgregno","login","UserName","Password","RequestCertifcates","OrgName","ReqTo","Message","User"],"sources":["C:/Users/adity/Desktop/D/extra/Blockchain/blockchain-certification/newnew/client/src/Utils/apiConnect.js"],"sourcesContent":["import { withRouter } from 'react-router-dom'\r\nimport React from \"react\";\r\nimport history from './history'\r\nimport { useCookies } from 'react-cookie'\r\n\r\n\r\n\r\n\r\n\r\nconst getHeader = {\r\n  headers: {\r\n    Accept: \"application/json\"\r\n  }\r\n};\r\n\r\nconst postHeader = {\r\n  method: \"POST\",\r\n  headers: {\r\n    ...getHeader,\r\n    \"Content-Type\": \"application/json\"\r\n  }\r\n};\r\n\r\nlet host = \"\";\r\n\r\nif (process.env.NODE_ENV !== \"production\") host = \"http://localhost:3000\";\r\n\r\nexport const getCertificate = certificateId =>\r\n  fetch(`${host}/certificate/data/${certificateId}`, getHeader)\r\n    .then(res => res.json())\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n\r\nexport const verifyCertificate = certificateId =>\r\n  fetch(`${host}/certificate/verify/${certificateId}`, getHeader)\r\n    .then(res => {\r\n      if (res.status === 200) return true;\r\n      else if (res.status === 401) return false;\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n\r\nexport const generateCertificate = (\r\n  candidateName,\r\n  courseName,\r\n  orgName,\r\n  assignDate,\r\n  duration,\r\n  emailId\r\n) =>\r\n// console.log(\"Hello\");\r\n  fetch(`${host}/certificate/generate`, {\r\n    ...postHeader,\r\n    body: JSON.stringify({\r\n      candidateName,\r\n      courseName,\r\n      orgName,\r\n      assignDate,\r\n      duration,\r\n      emailId\r\n    })\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n\r\n\r\n    export const SignUp =(username,pass,firstname,\r\n      lastname,\r\n      email,\r\n      phone,\r\n      gender\r\n      ) =>\r\n    {\r\n      fetch(`${host}/signup`, {\r\n        ...postHeader,\r\n        body: JSON.stringify({\r\n          username,\r\n          pass,\r\n          firstname,\r\n          lastname,\r\n          email,\r\n          phone,\r\n          gender,\r\n          \r\n        })\r\n      })\r\n      .then(async res =>{ if(res.status===200)\r\n        {\r\n          await res.json().then(\r\n            (body)=>{\r\n              console.log(body.result);\r\n              if(body.result==\"Success\")\r\n              {\r\n                localStorage.setItem('user',email)\r\n                localStorage.setItem('pwd',pass)\r\n                localStorage.setItem(\"privilege\",body.privilege)\r\n                history.push(\"/dashboard\");\r\n              }\r\n            }\r\n          )\r\n        }})\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    }\r\n\r\n    export const OrgReg =(orgname,\r\n      orgregno,\r\n      email,\r\n      phone,\r\n      pass\r\n      ) =>\r\n    {\r\n      fetch(`${host}/OrgReg`, {\r\n        ...postHeader,\r\n        body: JSON.stringify({\r\n          orgname,\r\n      orgregno,\r\n      email,\r\n      phone,\r\n      pass,\r\n          \r\n        })\r\n      })\r\n       .then(async res =>{ if(res.status===200)\r\n        {\r\n          await res.json().then(\r\n            (body)=>{\r\n              console.log(body.result);\r\n              if(body.result==\"Success\")\r\n              {\r\n                localStorage.setItem('user',email)\r\n                localStorage.setItem('pwd',pass)\r\n                localStorage.setItem(\"privilege\",body.privilege)\r\n                history.push(\"/orgHome\");\r\n              }\r\n            }\r\n          )\r\n        }})\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    }\r\n\r\n   export const login =(UserName,Password) =>\r\n    {\r\n      fetch(`${host}/login`, {\r\n        ...postHeader,\r\n        body: JSON.stringify({\r\n          email:UserName,\r\n          pass:Password\r\n        })\r\n      })\r\n      .then(async res =>{ if(res.status===200)\r\n        {\r\n          await res.json().then(\r\n            (body)=>{\r\n              console.log(body.result);\r\n              if(body.result==\"Success\")\r\n              {\r\n                localStorage.setItem('user',UserName)\r\n                localStorage.setItem('pwd',Password)\r\n                localStorage.setItem(\"privilege\",body.privilege)\r\n                if(body.privilege===\"normal\")history.push(\"/dashboard\");\r\n                else{history.push(\"/orgHome\")}\r\n              }\r\n            }\r\n          )\r\n        }})\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    }\r\n\r\n    \r\n// login.propTypes = {\r\n//   history: React.PropTypes.shape({\r\n//     push: React.PropTypes.func.isRequired,\r\n//   }),\r\n// };\r\n\r\n\r\nexport const RequestCertifcates =(UserName,Password,OrgName,ReqTo,Message\r\n  ) =>\r\n{\r\n  fetch(`${host}/signup`, {\r\n    ...postHeader,\r\n    body: JSON.stringify({\r\n      UserName,\r\n      Password,\r\n      OrgName,\r\n      ReqTo,\r\n      Message\r\n      \r\n    })\r\n  })\r\n    .then(res =>{ console.log(res.json())\r\n    \r\n      return ({User:UserName});\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}